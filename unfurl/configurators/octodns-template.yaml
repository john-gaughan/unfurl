# Copyright (c) 2020 Adam Souzis
# SPDX-License-Identifier: MIT
tosca_definitions_version: tosca_simple_unfurl_1_0_0

node_types:
  unfurl.nodes.DNSZone:
    derived_from: tosca.nodes.Root
    properties:
      name:
        description: DNS name of the zone (end with .)
        type: string
      provider:
        description: OctoDNS provider configuration
        type: map
      records:
        description: DNS records to add to the zone
        type: map
        default: {}
      exclusive:
        description: Zone exclusively managed by this instance (removes unrecognized records)
        type: boolean
        default: false
    attributes:
      zone:
        description: The records found in the zone
        type: map
      managed_records:
        description: The records in the zone that are managed by this instance
        type: map
        required: false
    capabilities:
        resolve:
           type: unfurl.capabilities.DNSZone
    interfaces:
      defaults:
        implementation:
          className: unfurl.configurators.octodns.OctoDnsConfigurator
      Standard:
        operations:
          delete:
          configure:
      Install:
        operations:
          check:

capability_types:

  unfurl.capabilities.DNSZone:
    derived_from: tosca.capabilities.Root

relationship_types:
  unfurl.relationships.DNSRecord:
    derived_from: tosca.relationships.Root
    valid_target_types: [unfurl.capabilities.DNSZone]
    properties:
      records:
        type: map
