{
  "name": "mysql-1593523508",
  "info": {
    "first_deployed": "2020-06-30T09:25:09.907656-04:00",
    "last_deployed": "2020-06-30T09:25:09.907656-04:00",
    "deleted": "",
    "description": "Install complete",
    "status": "deployed",
    "notes": "MySQL can be accessed via port 3306 on the following DNS name from within your cluster:\nmysql-1593523508.default.svc.cluster.local\n\nTo get your root password run:\n\n    MYSQL_ROOT_PASSWORD=$(kubectl get secret --namespace default mysql-1593523508 -o jsonpath=\"{.data.mysql-root-password}\" | base64 --decode; echo)\n\nTo connect to your database:\n\n1. Run an Ubuntu pod that you can use as a client:\n\n    kubectl run -i --tty ubuntu --image=ubuntu:16.04 --restart=Never -- bash -il\n\n2. Install the mysql client:\n\n    $ apt-get update && apt-get install mysql-client -y\n\n3. Connect using the mysql cli, then provide your password:\n    $ mysql -h mysql-1593523508 -p\n\nTo connect to your database directly from outside the K8s cluster:\n    MYSQL_HOST=127.0.0.1\n    MYSQL_PORT=3306\n\n    # Execute the following command to route the connection:\n    kubectl port-forward svc/mysql-1593523508 3306\n\n    mysql -h ${MYSQL_HOST} -P${MYSQL_PORT} -u root -p${MYSQL_ROOT_PASSWORD}\n    \n"
  },
  "manifest": "---\n# Source: mysql/templates/secrets.yaml\napiVersion: v1\nkind: Secret\nmetadata:\n  name: mysql-1593523508\n  namespace: default\n  labels:\n    app: mysql-1593523508\n    chart: \"mysql-1.6.4\"\n    release: \"mysql-1593523508\"\n    heritage: \"Helm\"\ntype: Opaque\ndata:\n  \n  \n  mysql-root-password: \"NHlYckJkeUNTSA==\"\n  \n  \n  \n  \n  mysql-password: \"QzJIYjNQNHgyQg==\"\n---\n# Source: mysql/templates/tests/test-configmap.yaml\napiVersion: v1\nkind: ConfigMap\nmetadata:\n  name: mysql-1593523508-test\n  namespace: default\n  labels:\n    app: mysql-1593523508\n    chart: \"mysql-1.6.4\"\n    heritage: \"Helm\"\n    release: \"mysql-1593523508\"\ndata:\n  run.sh: |-\n---\n# Source: mysql/templates/pvc.yaml\nkind: PersistentVolumeClaim\napiVersion: v1\nmetadata:\n  name: mysql-1593523508\n  namespace: default\n  labels:\n    app: mysql-1593523508\n    chart: \"mysql-1.6.4\"\n    release: \"mysql-1593523508\"\n    heritage: \"Helm\"\nspec:\n  accessModes:\n    - \"ReadWriteOnce\"\n  resources:\n    requests:\n      storage: \"8Gi\"\n---\n# Source: mysql/templates/svc.yaml\napiVersion: v1\nkind: Service\nmetadata:\n  name: mysql-1593523508\n  namespace: default\n  labels:\n    app: mysql-1593523508\n    chart: \"mysql-1.6.4\"\n    release: \"mysql-1593523508\"\n    heritage: \"Helm\"\n  annotations:\nspec:\n  type: ClusterIP\n  ports:\n  - name: mysql\n    port: 3306\n    targetPort: mysql\n  selector:\n    app: mysql-1593523508\n---\n# Source: mysql/templates/deployment.yaml\napiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: mysql-1593523508\n  namespace: default\n  labels:\n    app: mysql-1593523508\n    chart: \"mysql-1.6.4\"\n    release: \"mysql-1593523508\"\n    heritage: \"Helm\"\n\nspec:\n  strategy:\n    type: Recreate\n  selector:\n    matchLabels:\n      app: mysql-1593523508\n      release: mysql-1593523508\n  template:\n    metadata:\n      labels:\n        app: mysql-1593523508\n        release: mysql-1593523508\n    spec:\n      serviceAccountName: default\n      initContainers:\n      - name: \"remove-lost-found\"\n        image: \"busybox:1.31.1\"\n        imagePullPolicy: \"IfNotPresent\"\n        resources:\n          requests:\n            cpu: 10m\n            memory: 10Mi\n        command:  [\"rm\", \"-fr\", \"/var/lib/mysql/lost+found\"]\n        volumeMounts:\n        - name: data\n          mountPath: /var/lib/mysql\n      # - name: do-something\n      #   image: busybox\n      #   command: ['do', 'something']\n      \n      containers:\n      - name: mysql-1593523508\n        image: \"mysql:5.7.30\"\n        imagePullPolicy: \"IfNotPresent\"\n        resources:\n          requests:\n            cpu: 100m\n            memory: 256Mi\n        env:\n        - name: MYSQL_ROOT_PASSWORD\n          valueFrom:\n            secretKeyRef:\n              name: mysql-1593523508\n              key: mysql-root-password\n        - name: MYSQL_PASSWORD\n          valueFrom:\n            secretKeyRef:\n              name: mysql-1593523508\n              key: mysql-password\n              optional: true\n        - name: MYSQL_USER\n          value: \"\"\n        - name: MYSQL_DATABASE\n          value: \"\"\n        ports:\n        - name: mysql\n          containerPort: 3306\n        livenessProbe:\n          exec:\n            command:\n            - sh\n            - -c\n            - \"mysqladmin ping -u root -p${MYSQL_ROOT_PASSWORD}\"\n          initialDelaySeconds: 30\n          periodSeconds: 10\n          timeoutSeconds: 5\n          successThreshold: 1\n          failureThreshold: 3\n        readinessProbe:\n          exec:\n            command:\n            - sh\n            - -c\n            - \"mysqladmin ping -u root -p${MYSQL_ROOT_PASSWORD}\"\n          initialDelaySeconds: 5\n          periodSeconds: 10\n          timeoutSeconds: 1\n          successThreshold: 1\n          failureThreshold: 3\n        volumeMounts:\n        - name: data\n          mountPath: /var/lib/mysql\n        # - name: extras\n        #   mountPath: /usr/share/extras\n        #   readOnly: true\n        \n      volumes:\n      - name: data\n        persistentVolumeClaim:\n          claimName: mysql-1593523508\n      # - name: extras\n      #   emptyDir: {}\n",
  "hooks": [
    {
      "name": "mysql-1593523508-test",
      "kind": "Pod",
      "path": "mysql/templates/tests/test.yaml",
      "manifest": "apiVersion: v1\nkind: Pod\nmetadata:\n  name: mysql-1593523508-test\n  namespace: default\n  labels:\n    app: mysql-1593523508\n    chart: \"mysql-1.6.4\"\n    heritage: \"Helm\"\n    release: \"mysql-1593523508\"\n  annotations:\n    \"helm.sh/hook\": test-success\nspec:\n  initContainers:\n    - name: test-framework\n      image: \"dduportal/bats:0.4.0\"\n      command:\n      - \"bash\"\n      - \"-c\"\n      - |\n        set -ex\n        # copy bats to tools dir\n        cp -R /usr/local/libexec/ /tools/bats/\n      volumeMounts:\n      - mountPath: /tools\n        name: tools\n  containers:\n    - name: mysql-1593523508-test\n      image: \"mysql:5.7.30\"\n      command: [\"/tools/bats/bats\", \"-t\", \"/tests/run.sh\"]\n      volumeMounts:\n      - mountPath: /tests\n        name: tests\n        readOnly: true\n      - mountPath: /tools\n        name: tools\n  volumes:\n  - name: tests\n    configMap:\n      name: mysql-1593523508-test\n  - name: tools\n    emptyDir: {}\n  restartPolicy: Never",
      "events": [
        "test"
      ],
      "last_run": {
        "started_at": "",
        "completed_at": "",
        "phase": ""
      }
    }
  ],
  "version": 1,
  "namespace": "default"
}
